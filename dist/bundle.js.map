{"version":3,"sources":["webpack:///bundle.js","webpack:///./src/index.js","webpack:///./src/stores.js","webpack:///./src/RiotControl.js","webpack:///./src/events.js","webpack:///./src/riotTags.js","webpack:///./src/store/product-store.js","webpack:///./src/app.html","webpack:///./src/component/product.html","webpack:///./src/view/product-detail-view.html","webpack:///./src/view/product-list-view.html"],"names":["webpackJsonp","module","exports","__webpack_require__","riot","mount","call","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_storeProductStore","_storeProductStore2","stores","products","_RiotControlApi","RiotControl","_stores","addStore","store","this","push","forEach","api","args","slice","arguments","el","apply","control","SE","PRODUCTS_CHANGED","VE","RESET_DATA","STAR_PRODUCT","LOAD_PRODUCTS","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","LOCALSTORAGE_KEY","ProductStore","observable","json","window","localStorage","getItem","_products","JSON","parse","initData","id","filter","p","productID","defaultProducts","title","description","favorite","saveToStorage","setItem","stringify","theProductStore","on","trigger","tag","opts","_this","_currentView","resetData","loadView","viewName","unmount","mountTo","data","studyRoute","view","route","exec","console","dir","rememberMe","_stores2","posts","readData","_product","getProductById","_total","update"],"mappings":"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","file":"bundle.js","sourcesContent":["webpackJsonp([1],[\n/* 0 */\n/*!**********************!*\\\n  !*** ./src/index.js ***!\n  \\**********************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\t__webpack_require__(/*! ./RiotControl.js */ 3);\n\t\n\t__webpack_require__(/*! ./events.js */ 4);\n\t\n\t__webpack_require__(/*! ./stores.js */ 2);\n\t\n\t__webpack_require__(/*! ./riotTags.js */ 5);\n\t\n\t//main entry points\n\triot.mount('app');\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 1 */,\n/* 2 */\n/*!***********************!*\\\n  !*** ./src/stores.js ***!\n  \\***********************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _storeProductStore = __webpack_require__(/*! ./store/product-store */ 6);\n\t\n\tvar _storeProductStore2 = _interopRequireDefault(_storeProductStore);\n\t\n\tvar stores = { products: _storeProductStore2['default'] };\n\t\n\texports['default'] = stores;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 3 */\n/*!****************************!*\\\n  !*** ./src/RiotControl.js ***!\n  \\****************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {//https://github.com/jimsparkman/RiotControl\n\t\n\t'use strict';\n\t\n\tvar _RiotControlApi = ['on', 'one', 'off', 'trigger'];\n\tvar RiotControl = {\n\t  _stores: [],\n\t  addStore: function addStore(store) {\n\t    this._stores.push(store);\n\t  }\n\t};\n\t_RiotControlApi.forEach(function (api) {\n\t  RiotControl[api] = function () {\n\t    var args = [].slice.call(arguments);\n\t    this._stores.forEach(function (el) {\n\t      return el[api].apply(null, args);\n\t    });\n\t  };\n\t});\n\t\n\triot.control = RiotControl;\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 4 */\n/*!***********************!*\\\n  !*** ./src/events.js ***!\n  \\***********************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {//Application scope events\n\t\n\t// store events\n\t'use strict';\n\t\n\triot.SE = {\n\t  PRODUCTS_CHANGED: 'se_products_changed'\n\t};\n\t// view events\n\triot.VE = {\n\t  RESET_DATA: 've_reset_data',\n\t  STAR_PRODUCT: 've_star_product',\n\t  LOAD_PRODUCTS: 've_load_products'\n\t};\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 5 */\n/*!*************************!*\\\n  !*** ./src/riotTags.js ***!\n  \\*************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(/*! ./component/product.html */ 10);\n\t\n\t__webpack_require__(/*! ./view/product-list-view.html */ 12);\n\t\n\t__webpack_require__(/*! ./view/product-detail-view.html */ 11);\n\t\n\t__webpack_require__(/*! ./app.html */ 9\n\t\n\t//Does nothing but inlcude the riot views\n\t);\n\n/***/ },\n/* 6 */\n/*!************************************!*\\\n  !*** ./src/store/product-store.js ***!\n  \\************************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar LOCALSTORAGE_KEY = 'company-x-products';\n\t\n\t//Store definition\n\t\n\tvar ProductStore = (function () {\n\t  function ProductStore() {\n\t    _classCallCheck(this, ProductStore);\n\t\n\t    //*extend* this class with riot.observable\n\t    riot.observable(this);\n\t\n\t    //If you change the model, delete the localstoage object!\n\t    var json = window.localStorage.getItem(LOCALSTORAGE_KEY);\n\t\n\t    if (!json) {\n\t      this.initData();\n\t    } else {\n\t      this._products = json && JSON.parse(json) || [];\n\t    }\n\t  }\n\t\n\t  _createClass(ProductStore, [{\n\t    key: 'getProductById',\n\t    value: function getProductById(id) {\n\t      return this._products.filter(function (p) {\n\t        return p.productID == id;\n\t      })[0];\n\t    }\n\t  }, {\n\t    key: 'initData',\n\t    value: function initData() {\n\t      var defaultProducts = [{ productID: 1, title: 'Apples', description: 'Green or red', favorite: false }, { productID: 2, title: 'Bannanas', description: 'Almost extinct', favorite: false }, { productID: 3, title: 'Carrots', description: 'Kids like them', favorite: false }, { productID: 4, title: 'Potatoes', description: 'Best fried', favorite: false }, { productID: 5, title: 'Grapes', description: 'Fruit sweets', favorite: false }, { productID: 6, title: 'Bees', description: 'wtf are they here for', favorite: false }];\n\t      this._products = defaultProducts;\n\t      this.saveToStorage();\n\t    }\n\t  }, {\n\t    key: 'saveToStorage',\n\t    value: function saveToStorage() {\n\t      window.localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(this._products));\n\t    }\n\t  }]);\n\t\n\t  return ProductStore;\n\t})();\n\t\n\t//Create it\n\tvar theProductStore = new ProductStore();\n\t\n\t//setup event listerners\n\ttheProductStore.on(riot.VE.LOAD_PRODUCTS, function () {\n\t  theProductStore.trigger(riot.SE.PRODUCTS_CHANGED, theProductStore._products);\n\t});\n\t\n\ttheProductStore.on(riot.VE.RESET_DATA, function () {\n\t  theProductStore.initData();\n\t  theProductStore.trigger(riot.SE.PRODUCTS_CHANGED, theProductStore._products);\n\t});\n\t\n\ttheProductStore.on(riot.VE.STAR_PRODUCT, function (id) {\n\t  theProductStore._products.forEach(function (p) {\n\t    if (p.productID == id) {\n\t      p.favorite = !p.favorite;\n\t    };\n\t  });\n\t  theProductStore.saveToStorage();\n\t  theProductStore.trigger(riot.SE.PRODUCTS_CHANGED, theProductStore._products);\n\t});\n\t\n\t// register to riot control by myself\n\triot.control.addStore(theProductStore);\n\t\n\texports['default'] = theProductStore;\n\tmodule.exports = exports['default'];\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 7 */,\n/* 8 */,\n/* 9 */\n/*!**********************!*\\\n  !*** ./src/app.html ***!\n  \\**********************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {riot.tag('app', '<section> <header> <h1>My Store</h1> <nav> <ul> <li><a href=\"#products\">All Products</a></li> </ul> </nav> </header> <article> <div id=\"mainview\"></div> </article> <footer> <nav> <a onclick=\"{resetData}\">Reset Data</a> </nav> </footer> </section>', function(opts) {var _this = this;\n\t\n\tthis._currentView = null;\n\t\n\tthis.resetData = function () {\n\t  riot.control.trigger(riot.VE.RESET_DATA);\n\t};\n\t\n\tloadView = function (viewName, id) {\n\t  if (_this._currentView) {\n\t    _this._currentView.unmount(true);\n\t  };\n\t  _this._currentView = riot.mountTo('div#mainview', viewName, { data: id })[0];\n\t};\n\t\n\tstudyRoute = function (view, id) {\n\t  switch (view) {\n\t    case 'detail':\n\t      loadView('product-detail-view', id);\n\t      break;\n\t    case 'products':\n\t      loadView('product-list-view');\n\t      break;\n\t    default:\n\t      loadView('product-list-view');\n\t  }\n\t};\n\t\n\triot.route(studyRoute);\n\t\n\tthis.on('mount', function () {\n\t  riot.route.exec(studyRoute);\n\t});\n\t});\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 10 */\n/*!************************************!*\\\n  !*** ./src/component/product.html ***!\n  \\************************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {riot.tag('product', '<div> <span>[{opts.data.productID}]</span> <span><a href=\"#detail/{opts.data.productID}\">{opts.data.title}</a></span> <span>{opts.data.favorite?\\'*\\':\\'\\'}</span> <button onclick=\"{rememberMe}\">Remember</button> </div>', function(opts) {\n\t\n\tthis.on('mount', function () {\n\t  console.dir(opts.data);\n\t});\n\t\n\tthis.rememberMe = function () {\n\t  riot.control.trigger(riot.VE.STAR_PRODUCT, opts.data.productID);\n\t};\n\t});\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 11 */\n/*!*******************************************!*\\\n  !*** ./src/view/product-detail-view.html ***!\n  \\*******************************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {riot.tag('product-detail-view', '<h2>{_product.title}</h2> <p>{_product.description}</p> <p>{_product.favorite?\\'Stared\\':\\'Not stared\\'}</p> <a if=\"{ opts.data > 1 }\" href=\"#detail/{ opts.data - 1 }\">Prev</a> | <a if=\"{ opts.data < _total }\" href=\"#detail/{ opts.data - -1 }\">Next</a>', function(opts) {var _this = this;\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _stores = __webpack_require__(/*! ../stores */ 2);\n\t\n\tvar _stores2 = _interopRequireDefault(_stores);\n\t\n\triot.control.on(riot.SE.PRODUCTS_CHANGED, function (posts) {\n\t  _this.readData();\n\t});\n\t\n\tthis.readData = function () {\n\t  _this._product = _stores2['default'].products.getProductById(opts.data);\n\t  _this._total = _stores2['default'].products._products.length;\n\t  _this.update();\n\t};\n\t\n\tthis.readData();\n\t});\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 12 */\n/*!*****************************************!*\\\n  !*** ./src/view/product-list-view.html ***!\n  \\*****************************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {riot.tag('product-list-view', '<product each=\"{_products}\" data=\"{this}\"></product>', function(opts) {var _this = this;\n\t\n\tthis._products = [];\n\t\n\tthis.on('mount', function () {\n\t  riot.control.trigger(riot.VE.LOAD_PRODUCTS);\n\t});\n\t\n\triot.control.on(riot.SE.PRODUCTS_CHANGED, function (products) {\n\t  _this._products = products;\n\t  _this.update();\n\t});\n\t});\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ }\n]);\n\n\n/** WEBPACK FOOTER **\n ** bundle.js\n **/","import './RiotControl.js'\nimport './events.js'\nimport './stores.js'\nimport './riotTags.js'\n\n//main entry points\nriot.mount('app');\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import products from './store/product-store'\n\nconst stores = { products }\n\nexport default stores\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/stores.js\n **/","//https://github.com/jimsparkman/RiotControl\n\nlet _RiotControlApi = ['on','one','off','trigger']\nlet RiotControl = {\n  _stores: [],\n  addStore(store) {\n    this._stores.push(store);\n  }\n}\n_RiotControlApi.forEach(api => {\n  RiotControl[api] = function() {\n    let args = [].slice.call(arguments);\n    this._stores.forEach(el => el[api].apply(null, args));\n  }\n})\n\nriot.control = RiotControl;\n\n\n/** WEBPACK FOOTER **\n ** ./src/RiotControl.js\n **/","//Application scope events\n\n// store events\nriot.SE = {\n  PRODUCTS_CHANGED: 'se_products_changed',\n}\n// view events\nriot.VE = {\n  RESET_DATA: 've_reset_data',\n  STAR_PRODUCT: 've_star_product',\n  LOAD_PRODUCTS: 've_load_products',\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/events.js\n **/","import './component/product.html'\nimport './view/product-list-view.html'\nimport './view/product-detail-view.html'\nimport './app.html'\n\n//Does nothing but inlcude the riot views\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/riotTags.js\n **/","const LOCALSTORAGE_KEY = 'company-x-products';\n\n//Store definition\nclass ProductStore {\n  constructor() {\n    //*extend* this class with riot.observable\n    riot.observable(this)\n\n    //If you change the model, delete the localstoage object!\n    let json = window.localStorage.getItem(LOCALSTORAGE_KEY)\n\n    if (!json) {\n      this.initData()\n    } else {\n      this._products = (json && JSON.parse(json)) || []\n    }\n  }\n\n  getProductById(id) {\n    return this._products.filter(p => p.productID == id)[0]\n  }\n\n  initData() {\n    let defaultProducts = [\n      {productID:1, title:'Apples', description:'Green or red', favorite:false},\n      {productID:2, title:'Bannanas', description:'Almost extinct', favorite:false},\n      {productID:3, title:'Carrots', description:'Kids like them', favorite:false},\n      {productID:4, title:'Potatoes', description:'Best fried', favorite:false},\n      {productID:5, title:'Grapes', description:'Fruit sweets', favorite:false},\n      {productID:6, title:'Bees', description:'wtf are they here for', favorite:false},\n    ]\n    this._products = defaultProducts\n    this.saveToStorage()\n  }\n\n  saveToStorage() {\n    window.localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(this._products))\n  }\n}\n\n//Create it\nlet theProductStore = new ProductStore();\n\n//setup event listerners\ntheProductStore.on(riot.VE.LOAD_PRODUCTS, () => {\n  theProductStore.trigger(riot.SE.PRODUCTS_CHANGED, theProductStore._products);\n});\n\ntheProductStore.on(riot.VE.RESET_DATA, () => {\n  theProductStore.initData();\n  theProductStore.trigger(riot.SE.PRODUCTS_CHANGED, theProductStore._products);\n});\n\ntheProductStore.on(riot.VE.STAR_PRODUCT, id => {\n  theProductStore._products.forEach(p => {\n    if (p.productID == id) {\n      p.favorite = !p.favorite;\n    };\n  });\n  theProductStore.saveToStorage();\n  theProductStore.trigger(riot.SE.PRODUCTS_CHANGED, theProductStore._products);\n})\n\n// register to riot control by myself\nriot.control.addStore(theProductStore)\n\nexport default theProductStore\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/store/product-store.js\n **/","riot.tag('app', '<section> <header> <h1>My Store</h1> <nav> <ul> <li><a href=\"#products\">All Products</a></li> </ul> </nav> </header> <article> <div id=\"mainview\"></div> </article> <footer> <nav> <a onclick=\"{resetData}\">Reset Data</a> </nav> </footer> </section>', function(opts) {var _this = this;\n\nthis._currentView = null;\n\nthis.resetData = function () {\n  riot.control.trigger(riot.VE.RESET_DATA);\n};\n\nloadView = function (viewName, id) {\n  if (_this._currentView) {\n    _this._currentView.unmount(true);\n  };\n  _this._currentView = riot.mountTo('div#mainview', viewName, { data: id })[0];\n};\n\nstudyRoute = function (view, id) {\n  switch (view) {\n    case 'detail':\n      loadView('product-detail-view', id);\n      break;\n    case 'products':\n      loadView('product-list-view');\n      break;\n    default:\n      loadView('product-list-view');\n  }\n};\n\nriot.route(studyRoute);\n\nthis.on('mount', function () {\n  riot.route.exec(studyRoute);\n});\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app.html\n ** module id = 9\n ** module chunks = 1\n **/","riot.tag('product', '<div> <span>[{opts.data.productID}]</span> <span><a href=\"#detail/{opts.data.productID}\">{opts.data.title}</a></span> <span>{opts.data.favorite?\\'*\\':\\'\\'}</span> <button onclick=\"{rememberMe}\">Remember</button> </div>', function(opts) {\n\nthis.on('mount', function () {\n  console.dir(opts.data);\n});\n\nthis.rememberMe = function () {\n  riot.control.trigger(riot.VE.STAR_PRODUCT, opts.data.productID);\n};\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/component/product.html\n ** module id = 10\n ** module chunks = 1\n **/","riot.tag('product-detail-view', '<h2>{_product.title}</h2> <p>{_product.description}</p> <p>{_product.favorite?\\'Stared\\':\\'Not stared\\'}</p> <a if=\"{ opts.data > 1 }\" href=\"#detail/{ opts.data - 1 }\">Prev</a> | <a if=\"{ opts.data < _total }\" href=\"#detail/{ opts.data - -1 }\">Next</a>', function(opts) {var _this = this;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _stores = require('../stores');\n\nvar _stores2 = _interopRequireDefault(_stores);\n\nriot.control.on(riot.SE.PRODUCTS_CHANGED, function (posts) {\n  _this.readData();\n});\n\nthis.readData = function () {\n  _this._product = _stores2['default'].products.getProductById(opts.data);\n  _this._total = _stores2['default'].products._products.length;\n  _this.update();\n};\n\nthis.readData();\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/view/product-detail-view.html\n ** module id = 11\n ** module chunks = 1\n **/","riot.tag('product-list-view', '<product each=\"{_products}\" data=\"{this}\"></product>', function(opts) {var _this = this;\n\nthis._products = [];\n\nthis.on('mount', function () {\n  riot.control.trigger(riot.VE.LOAD_PRODUCTS);\n});\n\nriot.control.on(riot.SE.PRODUCTS_CHANGED, function (products) {\n  _this._products = products;\n  _this.update();\n});\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/view/product-list-view.html\n ** module id = 12\n ** module chunks = 1\n **/"],"sourceRoot":""}